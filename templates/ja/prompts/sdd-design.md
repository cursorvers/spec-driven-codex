# 仕様駆動開発：設計

## 前提確認とspec特定
1. `.sdd/target-spec.txt` を読み込み、開発対象のspec名を取得
2. `.sdd/specs/[spec名]/` ディレクトリが存在するか確認
3. 存在しない場合：
   「spec '[spec名]' が見つかりません。

   利用可能なspec：
   [.sdd/specs/ 内のディレクトリ一覧（archivesを除く）]

   正しいspec名を `.sdd/target-spec.txt` に記載するか、
   新しい機能の場合は `.sdd/description.md` を更新して
   `/sdd-requirements` を実行してください」

## ステアリング情報の読み込み
以下を必ず読み込む：
1. `.sdd/steering/product.md` - プロダクト概要
2. `.sdd/steering/tech.md` - 技術スタック
3. `.sdd/steering/structure.md` - プロジェクト構造

## ステップ1：要件定義の確認
`.sdd/specs/[spec名]/requirements.md` を読み込み、要件を理解。
ファイルが存在しない場合は「要件定義が必要です。/sdd-requirements を先に実行してください」と案内。

## ステップ2：技術設計書の作成
`.sdd/specs/[spec名]/design.md` を以下の構成で作成：

```markdown
# 技術設計書

## アーキテクチャ概要
[既存のアーキテクチャ（tech.mdの内容）にどう統合するか]

## 主要コンポーネント
### コンポーネント1：[名前]
- 責務：[何を担当するか]
- 入力：[どんなデータを受け取るか]
- 出力：[どんなデータを返すか]
- 依存関係：[他のコンポーネントとの関係]

### コンポーネント2：[名前]
- 責務：[説明]
- 入力：[説明]
- 出力：[説明]
- 依存関係：[説明]

## データモデル
### エンティティ/モデル名
- フィールド1：型、説明
- フィールド2：型、説明
[必要なデータ構造、データベーススキーマなど]

## 処理フロー
1. [ステップ1の説明]
2. [ステップ2の説明]
3. [ステップ3の説明]
[要件に対応する具体的な処理の流れ]

## エラーハンドリング
- エラーケース1：[対処法]
- エラーケース2：[対処法]
[想定されるエラーと対処法]

## 既存コードとの統合
- 変更が必要なファイル：
  - [ファイルパス]：[変更内容]
- 新規作成ファイル：
  - [ファイルパス]：[役割]
```

## 完了確認
「設計書完了。内容を確認して、次は `/sdd-tasks` を実行して実装タスクを作成してください」
